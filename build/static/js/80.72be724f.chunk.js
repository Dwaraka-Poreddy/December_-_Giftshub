(this["webpackJsonpnov-12-7-37am-forked"]=this["webpackJsonpnov-12-7-37am-forked"]||[]).push([[80],{1065:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var r=n(98),o=n(1),a=n.n(o),i=n(968);n(31);function c(){var e=Object(o.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1],u=e=>new Promise((t,n)=>{console.log(e,"convert");var r=new FileReader;r.onerror=n,r.onload=()=>{t(r.result)},r.readAsDataURL(e),console.log(r.readAsDataURL(e),"read as blob")});return a.a.createElement("div",null,a.a.createElement(i.ReactMic,{record:n,className:"sound-wave",onStop:e=>{console.log("recordedBlob is: ",e)},onData:e=>{console.log("chunk of real-time data is: ",e)},strokeColor:"#000000",backgroundColor:"#FF4081"}),a.a.createElement("button",{onClick:()=>{c(!0)},type:"button"},"Start"),a.a.createElement("button",{onClick:()=>{c(!1)},type:"button"},"Stop"),a.a.createElement("button",{onClick:()=>{var e;(e="blob:https://e3wtk.csb.app/5883424f-c32e-4116-a554-008658e083d7",fetch(e).then(e=>e.blob())).then(u).then(console.log("blobqwert"))}},"upload"))}},968:function(e,t,n){var r,o;window,e.exports=(r=n(4),o=n(1),function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=r},function(e,t){e.exports=o},function(e,t,n){e.exports=n(3)},function(e,t,n){"use strict";n.r(t);var r,o,a,i=n(1),c=n.n(i),u=n(0),l=new(window.AudioContext||window.webkitAudioContext),s=l.createAnalyser(),f=function(){return l},p=function(){return s},d=function(){s=l.createAnalyser()};function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b,y,h,m,g,S,w,C,R=[];navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var k,O=function(){function e(t,n,i,c,u,l){var s,d,v=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d=function(){if(b=Date.now(),a){if(o&&"suspended"===o.state&&o.resume(),a&&"paused"===a.state)return void a.resume();o&&a&&"inactive"===a.state&&(a.start(10),o.createMediaStreamSource(y).connect(r),m&&m())}else navigator.mediaDevices?(console.log("getUserMedia supported."),navigator.mediaDevices.getUserMedia(C).then((function(e){y=e,a=MediaRecorder.isTypeSupported(h.mimeType)?new MediaRecorder(e,h):new MediaRecorder(e),m&&m(),a.onstop=v.onStop,a.ondataavailable=function(e){R.push(e.data),w&&w(e.data)},(o=f()).resume().then((function(){r=p(),a.start(10),o.createMediaStreamSource(y).connect(r)}))}))):alert("Your browser does not support audio recording")},(s="startRecording")in this?Object.defineProperty(this,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):this[s]=d;var k=l.echoCancellation,O=l.autoGainControl,M=l.noiseSuppression,j=l.channelCount;m=t,g=n,S=i,w=c,h=u,C={audio:{echoCancellation:k,autoGainControl:O,noiseSuppression:M,channelCount:j},video:!1}}var t,n;return t=e,(n=[{key:"stopRecording",value:function(){a&&"inactive"!==a.state&&(a.stop(),y.getAudioTracks().forEach((function(e){e.stop()})),a=null,d())}},{key:"onStop",value:function(){var e=new Blob(R,{type:h.mimeType});R=[];var t={blob:e,startTime:b,stopTime:Date.now(),options:h,blobURL:window.URL.createObjectURL(e)};g&&g(t),S&&S(t)}}])&&v(t.prototype,n),e}(),M=function(e){var t=f(),n=p();if(void 0===k){var r=t.createMediaElementSource(e);r.connect(n),k=r}n.connect(t.destination)},j={visualizeSineWave:function(e,t,n,r,o,a){var i=p(),c=i.fftSize,u=new Uint8Array(c);e.clearRect(0,0,n,r),function l(){requestAnimationFrame(l),(i=p()).getByteTimeDomainData(u),e.fillStyle=o,e.fillRect(0,0,n,r),e.lineWidth=2,e.strokeStyle=a,e.beginPath();for(var s=1*n/c,f=0,d=0;d<c;d++){var v=u[d]/128*r/2;0===d?e.moveTo(f,v):e.lineTo(f,v),f+=s}e.lineTo(t.width,t.height/2),e.stroke()}()},visualizeFrequencyBars:function(e,t,n,r,o,a){var i=this,c=p();c.fftSize=256;var u=c.frequencyBinCount,l=new Uint8Array(u);e.clearRect(0,0,n,r),function t(){requestAnimationFrame(t),(c=p()).getByteFrequencyData(l),e.fillStyle=o,e.fillRect(0,0,n,r);for(var s,f=n/u*2.5,d=0,v=0;v<u;v++)s=l[v],i.hexToRgb(a),e.fillStyle=a,e.fillRect(d,r-s/2,f,s/2),d+=f+1}()},visualizeFrequencyCircles:function(e,t,n,r,o,a){var i=p();i.fftSize=32;var c=i.frequencyBinCount,u=new Uint8Array(c);e.clearRect(0,0,n,r),function t(){requestAnimationFrame(t),(i=p()).getByteFrequencyData(u);for(var l=new Uint8Array(c/3),s=0;s<c;s+=3){for(var f=0,d=0;d<3;d++)f+=u[s+d];l[s/3]=f/3}e.clearRect(0,0,n,r),e.beginPath(),e.arc(n/2,r/2,Math.min(r,n)/2,0,2*Math.PI),e.fillStyle=o,e.fill();var v=Math.min(r,n)/2/l.length;e.strokeStyle=a;for(var b=0;b<l.length;b++){e.beginPath();var y=v*b+v*(l[b]/128);e.arc(n/2,r/2,y,0,2*Math.PI),e.stroke()}}()},hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}};function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z=function(e){function t(e){var n,r,o,a,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=x(t).call(this,e),n=!r||"object"!==P(r)&&"function"!=typeof r?A(this):r,i=function(){var e=n.props,t=e.backgroundColor,r=e.strokeColor,o=e.width,a=e.height,i=e.visualSetting,c=n.state,u=c.canvas,l=c.canvasCtx;"sinewave"===i?j.visualizeSineWave(l,u,o,a,t,r):"frequencyBars"===i?j.visualizeFrequencyBars(l,u,o,a,t,r):"frequencyCircles"===i&&j.visualizeFrequencyCircles(l,u,o,a,t,r)},(a="visualize")in(o=A(n))?Object.defineProperty(o,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[a]=i,n.visualizerRef=c.a.createRef(),n.state={microphoneRecorder:null,canvas:null,canvasCtx:null},n}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.record,r=t.onStop,o=this.state.microphoneRecorder;e.record!==n&&(n?o&&o.startRecording():o&&(o.stopRecording(r),this.clear()))}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.onSave,r=t.onStop,o=t.onStart,a=t.onData,i=t.audioElem,c=t.audioBitsPerSecond,u=t.echoCancellation,l=t.autoGainControl,s=t.noiseSuppression,f=(t.channelCount,t.mimeType),p=this.visualizerRef.current,d=p.getContext("2d"),v={audioBitsPerSecond:c,mimeType:f},b={echoCancellation:u,autoGainControl:l,noiseSuppression:s};i?(M(i),this.setState({canvas:p,canvasCtx:d},(function(){e.visualize()}))):this.setState({microphoneRecorder:new O(o,r,n,a,v,b),canvas:p,canvasCtx:d},(function(){e.visualize()}))}},{key:"clear",value:function(){var e=this.props,t=e.width,n=e.height;this.state.canvasCtx.clearRect(0,0,t,n)}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height;return c.a.createElement("canvas",{ref:this.visualizerRef,height:n,width:t,className:this.props.className})}}])&&T(n.prototype,r),t}(i.Component);z.propTypes={backgroundColor:u.string,strokeColor:u.string,className:u.string,audioBitsPerSecond:u.number,mimeType:u.string,height:u.number,record:u.bool.isRequired,onStop:u.func,onData:u.func,onSave:u.func},z.defaultProps={backgroundColor:"rgba(255, 255, 255, 0.5)",strokeColor:"#000000",className:"visualizer",audioBitsPerSecond:128e3,mimeType:"audio/webm;codecs=opus",record:!1,width:640,height:100,visualSetting:"sinewave",echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1,channelCount:2},n.d(t,"ReactMic",(function(){return z}))}]))},98:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){o=!0,a=u}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,"a",(function(){return o}))}}]);
//# sourceMappingURL=80.72be724f.chunk.js.map